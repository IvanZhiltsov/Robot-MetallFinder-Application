# Robot-MetallFinder-Application
Приложение для связи с роботом-металлоискателем

# Описание робота
Робот на 6-ти колёсах с автономным управлением, предназначен для поиска металла на заданной территории. Робот самостоятельно прочёсывает зону поиска, выбирая оптимальную траекторию. Места с найденным металлом помечаются в памяти робота, поэтому после завершения работы можно получить координаты этих мест. Задать роботу область поиска и получить с него собранные данные можно с помощью этого приложения

# Описание приложения
1. Приложение позволяет устанавить сявзь с роботом через Bluetooth, чтобы передать ему необходимую область поиска или получить информациию о местах с найденным металлом
2. Приложение отображает текущее состояние робота: заряд батареи, исправность модулей, готовность к работе и прочее
3. Приложение позволяет смоделировать необходимую область поиска, отобразить её на карте в удобном для человека фрмате и сохранить в виде набора координат
4. Приложение позволяет отобразить на карте или сохранить в виде набора координат данные, полученные роботом

# Техническое задание
Приложение имеет 2 основные вкладки - *карта* и *робот*

**Вкладка *карта***
**1.** - Имеет виджет *QWebEngineView* для отображеиня карты реальной местности
   - На виджите распологается html код с использованием *JS APY Яндекс Карт* для загрузки карты с серверов компании *Яндекс*
   - Также с помощью JavaScript отображаются дополнительные графические объекты для отображеия данных на карте
**2**. - Имеет возможность рисовать полигон на карте - область поиска
   - Для этого имеются кнопки переключения режимов: *курсор* и *полигон*, а также операции: *удалить полигон*, создать точки *старта/финиша* робота и *отмена/возврат* действий (по умолчанию - *курсор*)
   - Кнопки расположены над картой и имеют свои иконки
   - При длительном наведении на кнопку отображается название её режима или операции
   - Если действие недоступно, то недостпно и нажатие на кнопку
   - Выбранный режим или операция подсвечивается

   **Режим *полигон*:**
   - Полигон рисуется добавлением точек (вершин): новая вершина соединяется линией с предыдущей и показывает пунктиром соединение с первоначальной, тем самым замыкая полигон и показывая конечную область
   - Левой кнопкой мыши фиксируются точки, при фиксации точки автоматически добавляется следующая вершина полигона
   - Правой кнопкой мыши завершается создание полигона (последняя не фиксированная точка не добавляется), после чего режим сменяется на *курсор*
   
   Ограничения:
   - завершить создание полигона можно только, если в нём более 2 вершин, иначе действие приведёт к удалению созданных объектов и переходу в режим *курсор*
   - зафиксировать точку можно только, если полигон будет удовлетворять условиям, описанным ниже, иначе действие приведёт к редактированию предыдущей вершины
   
   **Режим *старт/финиш*:**
   - Задаёт начальное и конечное положение робота соответственно
   - Точки привязываются к границе полигона и другой точке *старта/финиша*, если находятся в близи неё
   - Точки *старта* и *финиша* могут совпадать
   - Левой кнопкой мыши фиксируются точки, режим сменяется на *курсор*
   - Правой кнопкой мыши отменяется создание точки, режим сменяется на *курсор*
   
   Ограничение: создать точку можно только после создания полигона, если она попадает в его область, иначе действие вернёт в режим *курсор*

   **Режим *курсор*:**
   - Зажав левую кнопку мыши на вершине созданного полигона или точке *старта/финиша*, можно передвигать её
   - Зажав левую кнопку мыши на пустом пространстве, можно передвигаться по карте
   - Щёленув правой кнопкой мыши по ребру полигона, можно добавить новую вершину на ребре в месте клика или создать/удалить точку *старта/финиша*
   - Щёлкнув правой кнопкой мыши по вершине полигона, можно удалить её (удаляются 2 выходящих из неё ребра, а 2 соседнии вершины соединяются новым ребром) или создать/удалить точку *старта/финиша*
   - Щёлкнув правой кнопкой мыши по точке *старта/финиша*, можно удалить её
   
   На действие накладываются все выше изложенные ограничения, которые отменяют его, кроме:
   - если после удаления точки осталось 2 вершины, удаляются все объекты
   - если после перемещения вершины точка *старта/финиша* вышла за область, то она удаляется

   **Режим *удалить полигон* удаляет весь полигон, если он был создан, позволяя рисовать новый**
   
   **Режимы *отмена/возврат* действий отменяет или возвращает действие соответственно**

   **Условие создания полигона:**
   - отсутствует пересечение или совпадение рёбер
   - длина ребра и угол между ними находятся в рамках некоторых критических значений, кторые учитывают размеры робота и погрешность при его перемещении

   **Каждый тип объекта имеет свой цвет, при нарушении ограничений ошибки подсвечиваются**
